{% extends "::base.html.twig" %}

{% trans_default_domain 'At21EBoxOfficeBundle' %}

{% block body %}
    <input id="userId" type="hidden" value="{{ app.user.id }}"/>
    <input id="sessionId" type="hidden" value="{{ session.id }}"/>
    <div class="sixteen wide column">
        <table class="ui definition table">
            <thead>
                <tr>
                    <th colspan="1"></th>
                    {% for i in 1..session.theatre.numberOfSeatsPerRow %}
                        <th>{{ i }}</th>
                    {% endfor %}
                </tr>
            </thead>
        {% for seat in session.seats %}
            {% if seat.columnNumber == 1 %}
                <tr><td>{{ seat.rowNumber }}</td>
            {% endif %}
            {% if (seat.isBusy) and (seat.user) and (app.user.id == seat.user.id) %}
                <td class="warning">
            {% elseif seat.isBusy %}
                <td class="negative">
            {% else %}
                <td>
            {% endif %}
                    <div data-id="{{ seat.id }}"
                         data-version="{{ seat.version }}"
                         data-row="{{ seat.rowNumber }}"
                         data-column="{{ seat.columnNumber }}"
                         data-price="{{ seat.session.price }}">
                        <div>R: {{ seat.rowNumber }}</div>
                        <div>C: {{ seat.columnNumber }}</div>
                    </div>
                </td>

            {% if seat.columnNumber == session.theatre.numberOfSeatsPerRow %}
                </tr>
            {% endif %}
        {% endfor %}
        </table>
    </div>
    <div class="sixteen wide column">
        <div class="ui header">Seats selected: </div>
        <div id="seat-list" class="ui relaxed horizontal list"></div>
    </div>
    <div class="sixteen wide column">
        <div class="ui header">Amount: </div>
        <h4 id="amount" class="ui header"></h4>
    </div>
    <div class="sixteen wide column">
        <div id="confirmAndPay" class="ui button">Confirm & Pay</div>
    </div>
{% endblock %}
{% block javascripts %}
    <script src="{{ asset('bundles/at21eboxoffice/js/checkSession.js') }}" type="text/javascript"></script>
{% endblock %}